{% extends "web/base.html" %}
{% load static %}

{% block title %}Herb List{% endblock %}

{% block content %}
<div style="-webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-size: 20px;
            line-height: 1.428571429;
            color: #333333;
            box-sizing: border-box;
            padding-bottom: 9px;
            margin: 40px 0 20px;
            border-bottom: 2px solid #eeeeee;">
    Herbs
</div>

<!-- 分页信息和导航 -->
<div class="pagination-holder d-flex justify-content-between align-items-center mt-3">
  <div class="page_info">
    Displaying <b>{{ page_obj.start_index }} - {{ page_obj.end_index }}</b> of <b>{{ page_obj.paginator.count }}</b> in total
  </div>
  <ul class="pagination pagination-sm mb-0">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">‹ Prev</a></li>
    {% endif %}

    {% if page_obj.number > 3 %}
      <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
      {% if page_obj.number > 4 %}
        <li class="page-item disabled"><a class="page-link" href="#">…</a></li>
      {% endif %}
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
      {% if num >= page_obj.number|add:"-2" and num <= page_obj.number|add:"2" %}
        <li class="page-item {% if num == page_obj.number %}active{% endif %}">
          <a class="page-link" href="?page={{ num }}">{{ num }}</a>
        </li>
      {% endif %}
    {% endfor %}

    {% if page_obj.number < page_obj.paginator.num_pages|add:"-2" %}
      {% if page_obj.number < page_obj.paginator.num_pages|add:"-3" %}
        <li class="page-item disabled"><a class="page-link" href="#">…</a></li>
      {% endif %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">
          {{ page_obj.paginator.num_pages }}
        </a>
      </li>
    {% endif %}

    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Next ›</a></li>
    {% endif %}
  </ul>
</div>


<div class="table-responsive">
    {% if no_result %}
    <p class="text-danger">无内容</p>
    {% endif %}

    <form method="get" action="{% url 'herb_list' %}">
        <table class="table w-100 table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th style="min-width: 120px;">#</th>
                    <th style="min-width: 180px;">Latin Name</th>
                    <th style="min-width: 160px;">Chinese Name</th>
                    <th style="min-width: 160px;">Tissue</th>
                    <th style="min-width: 160px;"></th>
                </tr>
            </thead>
            <tbody>
                {% for herb in herbs %}
                <tr>
                    <td>{{ page_obj.start_index|add:forloop.counter0 }}</td>
                    <td>{{ herb.latin_name }}</td>
                    <td>{{ herb.chinese_name }}</td>
                    <td>{{ herb.tissue }}</td>
                    <td>
                        <a href="{% url 'herb_detail' herb.latin_name %}" class="btn btn-sm btn-outline-primary">
                            View
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="6" class="text-center text-danger">未找到结果</td></tr>
                {% endfor %}
            </tbody>
    </table>

</div>

<!-- 分页信息和导航 -->
<div class="pagination-holder d-flex justify-content-between align-items-center mt-3">
  <div class="page_info">
    Displaying <b>{{ page_obj.start_index }} - {{ page_obj.end_index }}</b> of <b>{{ page_obj.paginator.count }}</b> in total
  </div>
  <ul class="pagination pagination-sm mb-0">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">‹ Prev</a></li>
    {% endif %}

    {% if page_obj.number > 3 %}
      <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
      {% if page_obj.number > 4 %}
        <li class="page-item disabled"><a class="page-link" href="#">…</a></li>
      {% endif %}
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
      {% if num >= page_obj.number|add:"-2" and num <= page_obj.number|add:"2" %}
        <li class="page-item {% if num == page_obj.number %}active{% endif %}">
          <a class="page-link" href="?page={{ num }}">{{ num }}</a>
        </li>
      {% endif %}
    {% endfor %}

    {% if page_obj.number < page_obj.paginator.num_pages|add:"-2" %}
      {% if page_obj.number < page_obj.paginator.num_pages|add:"-3" %}
        <li class="page-item disabled"><a class="page-link" href="#">…</a></li>
      {% endif %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">
          {{ page_obj.paginator.num_pages }}
        </a>
      </li>
    {% endif %}

    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Next ›</a></li>
    {% endif %}
  </ul>
</div>

<hr>

{% endblock %}